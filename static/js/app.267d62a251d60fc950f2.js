webpackJsonp([1],{"/F+Z":function(t,e){},"3AYG":function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("7+uW"),s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",[t._l(t.links,function(e,a){return r("v-list-tile",{key:e.title,attrs:{to:e.url}},[r("v-list-tile-action",[r("v-icon",[t._v(t._s(t.links[a].icon))])],1),t._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[t._v(t._s(t.links[a].title))])],1)],1)}),t._v(" "),t.isUserLoggedIn?r("v-list-tile",{on:{click:t.onLogout}},[r("v-list-tile-action",[r("v-icon",[t._v("exit_to_app")])],1),t._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[t._v("Logout")])],1)],1):t._e()],2)],1),t._v(" "),r("v-toolbar",{attrs:{dark:"",app:"",color:"blue-grey darken-3"}},[r("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),r("v-toolbar-title",[r("router-link",{staticClass:"pointer",attrs:{to:"/",tag:"span"}},[t._v("Ad application")])],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t._l(t.links,function(e){return r("v-btn",{key:e.title,attrs:{to:e.url,flat:""}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v("\n        "+t._s(e.title)+"\n      ")],1)}),t._v(" "),t.isUserLoggedIn?r("v-btn",{attrs:{flat:""},on:{click:t.onLogout}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n        Logout\n      ")],1):t._e()],2)],1),t._v(" "),r("v-content",[r("router-view")],1),t._v(" "),t.error?[r("v-snackbar",{attrs:{"multi-line":!0,color:"blue-grey darken-3",value:!0}},[t._v("\n      "+t._s(t.error)+"\n      "),r("v-btn",{attrs:{flat:"",color:"error"},nativeOn:{click:function(e){return t.closeError(e)}}},[t._v("\n        Close\n      ")])],1)]:t._e(),t._v(" "),t.message?[r("v-snackbar",{attrs:{color:"blue-grey darken-1",value:!0,right:!0,timeout:6e3}},[t._v("\n      "+t._s(t.message)+"\n    ")])]:t._e()],2)},staticRenderFns:[]};var n=r("VU/8")({data:function(){return{drawer:!1}},computed:{error:function(){return this.$store.getters.error},message:function(){return this.$store.getters.message},isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn},links:function(){return this.isUserLoggedIn?[{title:"Orders",icon:"bookmark_border",url:"/orders"},{title:"New ad",icon:"note_add",url:"/new"},{title:"My ads",icon:"list",url:"/list"}]:[{title:"Login",icon:"lock",url:"/login"},{title:"Registration",icon:"person",url:"/registration"}]}},methods:{closeError:function(){this.$store.dispatch("clearError")},onLogout:function(){this.$store.dispatch("logoutUser"),this.$router.push("/")}}},s,!1,function(t){r("3AYG")},"data-v-6b3b55d5",null).exports,o=r("/ocq"),i=r("NYxO"),l=r("fZjL"),c=r.n(l),d=r("Xxa5"),u=r.n(d),v=r("Dd8w"),p=r.n(v),m=r("exGp"),f=r.n(m),h=r("Zrlr"),g=r.n(h),_=r("kxiW"),x=function t(e,r,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;g()(this,t),this.title=e,this.description=r,this.ownerId=a,this.imgName=s,this.src=n,this.promo=o,this.id=i},w={state:{ads:[]},mutations:{createAd:function(t,e){t.ads.push(new x(e.title,e.description,e.ownerId,e.imgName,e.src,e.promo,e.id))},loadAds:function(t,e){t.ads=e},updateAd:function(t,e){var r=e.title,a=e.description,s=e.id,n=t.ads.find(function(t){return t.id===s});n.title=r,n.description=a}},actions:{createAd:function(t,e){var r=this,a=t.commit,s=t.getters;return f()(u.a.mark(function t(){var n,o,i,l,c,d;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),a("clearMessage"),a("setLoading",!0),n=e.image,t.prev=4,o=new x(e.title,e.description,s.user.id,"","",e.promo),t.next=8,_.database().ref("ads").push(o);case 8:return i=t.sent,l=n.name.slice(n.name.lastIndexOf(".")),c=""+i.key+l,t.next=13,_.storage().ref("ads/"+c).put(n);case 13:return t.next=15,_.storage().ref("ads/"+c).getDownloadURL().then(function(t){return t});case 15:return d=t.sent,t.next=18,_.database().ref("ads").child(i.key).update({src:d,imgName:c});case 18:a("setLoading",!1),a("createAd",p()({},o,{id:i.key,imgName:c,src:d})),a("setMessage","New ad created"),t.next=28;break;case 23:throw t.prev=23,t.t0=t.catch(4),a("setLoading",!1),a("setError",t.t0.message),t.t0;case 28:case"end":return t.stop()}},t,r,[[4,23]])}))()},fetchAds:function(t){var e=this,r=t.commit;return f()(u.a.mark(function t(){var a,s,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),a=[],t.prev=3,t.next=6,_.database().ref("ads").once("value");case 6:s=t.sent,n=s.val(),c()(n).forEach(function(t){var e=n[t];a.push(new x(e.title,e.description,e.ownerId,e.imgName,e.src,e.promo,t))}),r("loadAds",a),r("setLoading",!1),t.next=18;break;case 13:throw t.prev=13,t.t0=t.catch(3),r("setLoading",!1),r("setError",t.t0.message),t.t0;case 18:case"end":return t.stop()}},t,e,[[3,13]])}))()},updateAd:function(t,e){var r=this,a=t.commit,s=e.title,n=e.description,o=e.id;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),a("clearMessage"),a("setLoading",!0),t.prev=3,t.next=6,_.database().ref("ads").child(o).update({title:s,description:n});case 6:a("updateAd",{title:s,description:n,id:o}),a("setLoading",!1),a("setMessage","Ad updated"),t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(3),a("setError",t.t0.message),a("setLoading",!1),t.t0;case 16:case"end":return t.stop()}},t,r,[[3,11]])}))()},deleteAd:function(t,e){var r=this,a=t.commit,s=e.ad;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),a("clearMessage"),a("setLoading",!0),t.prev=3,t.next=6,_.database().ref("ads").child(s.id).remove();case 6:return t.next=8,_.storage().ref("ads").child(""+s.imgName).delete();case 8:a("setLoading",!1),a("setMessage","Ad deleted"),t.next=17;break;case 12:throw t.prev=12,t.t0=t.catch(3),a("setError",t.t0.message),a("setLoading",!1),t.t0;case 17:case"end":return t.stop()}},t,r,[[3,12]])}))()}},getters:{ads:function(t){return t.ads},promoAds:function(t){return t.ads.filter(function(t){return t.promo})},userAds:function(t,e){return t.ads.filter(function(t){return t.ownerId===e.user.id})},adById:function(t){return function(e){return t.ads.find(function(t){return t.id===e})}}}},b=function t(e){g()(this,t),this.id=e},k={state:{user:null},mutations:{setUser:function(t,e){t.user=e}},actions:{registerUser:function(t,e){var r=this,a=t.commit,s=e.email,n=e.password;return f()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),a("setLoading",!0),t.prev=2,t.next=5,_.auth().createUserWithEmailAndPassword(s,n);case 5:e=t.sent,a("setUser",new b(e.uid)),a("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(2),a("setLoading",!1),a("setError",t.t0.message),t.t0;case 15:case"end":return t.stop()}},t,r,[[2,10]])}))()},loginUser:function(t,e){var r=this,a=t.commit,s=e.email,n=e.password;return f()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),a("setLoading",!0),t.prev=2,t.next=5,_.auth().signInWithEmailAndPassword(s,n);case 5:e=t.sent,a("setUser",new b(e.uid)),a("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(2),a("setLoading",!1),a("setError",t.t0.message),t.t0;case 15:case"end":return t.stop()}},t,r,[[2,10]])}))()},logoutUser:function(t){var e=t.commit;_.auth().signOut(),e("setUser",null)},autoLogin:function(t,e){(0,t.commit)("setUser",new b(e.uid))}},getters:{user:function(t){return t.user},isUserLoggedIn:function(t){return null!==t.user}}},y=function t(e,r,a,s){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;g()(this,t),this.name=e,this.phone=r,this.message=a,this.adId=s,this.done=n,this.id=o},E={state:{orders:[]},mutations:{loadOrders:function(t,e){t.orders=e}},actions:{createOrder:function(t,e){var r=this,a=t.commit,s=e.name,n=e.phone,o=e.message,i=e.adId,l=e.ownerId;return f()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new y(s,n,o,i),a("clearError"),t.prev=2,t.next=5,_.database().ref("/users/"+l+"/orders").push(e);case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(2),a("setError",t.t0.message),t.t0;case 11:case"end":return t.stop()}},t,r,[[2,7]])}))()},fetchOrders:function(t){var e=this,r=t.commit,a=t.getters;return f()(u.a.mark(function t(){var s,n,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),s=[],t.prev=3,t.next=6,_.database().ref("/users/"+a.user.id+"/orders").once("value");case 6:n=t.sent,null!==(o=n.val())&&c()(o).forEach(function(t){var e=o[t];s.push(new y(e.name,e.phone,e.message,e.adId,e.done,t))}),r("loadOrders",s),r("setLoading",!1),t.next=18;break;case 13:throw t.prev=13,t.t0=t.catch(3),r("setLoading",!1),r("setError",t.t0.message),t.t0;case 18:case"end":return t.stop()}},t,e,[[3,13]])}))()},markOrderDone:function(t,e){var r=this,a=t.commit,s=t.getters;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("clearError"),t.prev=1,t.next=4,_.database().ref("/users/"+s.user.id+"/orders").child(e).update({done:!0});case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(1),a("setError",t.t0.message),t.t0;case 10:case"end":return t.stop()}},t,r,[[1,6]])}))()}},getters:{doneOrders:function(t){return t.orders.filter(function(t){return t.done})},undoneOrders:function(t){return t.orders.filter(function(t){return!t.done})},orders:function(t,e){return e.undoneOrders.concat(e.doneOrders)}}};a.a.use(i.a);var C=new i.a.Store({modules:{ads:w,user:k,shared:{state:{loading:!1,error:!1,message:""},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=null},setMessage:function(t,e){t.message=e},clearMessage:function(t){t.message=""}},actions:{setLoading:function(t,e){(0,t.commit)("setLoading",e)},setError:function(t,e){(0,t.commit)("setError",e)},clearError:function(t){(0,t.commit)("clearError")},setMessage:function(t,e){(0,t.commit)("setMessage",e)},clearMessage:function(t){(0,t.commit)("clearMessage")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error},message:function(t){return t.message}}},orders:E}}),$=function(t,e,r){C.getters.user?r():r("/login?loginError=true")},L={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{staticClass:"text-xs-center home__loader-margin",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{size:70,width:4,indeterminate:"",color:"orange accent-2"}})],1)],1)],1)],1):r("div",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-carousel",t._l(t.promoAds,function(e){return r("v-carousel-item",{key:e.id,attrs:{src:e.src}},[r("div",{staticClass:"ad-btn"},[r("v-btn",{attrs:{color:"orange accent-2",to:"/ad/"+e.id}},[t._v(t._s(e.title))])],1)])}))],1)],1)],1),t._v(" "),r("v-container",{attrs:{"grid-list-lg":""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.ads,function(e){return r("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[r("v-card",[r("v-card-media",{attrs:{to:"/ad/"+e.id,src:e.src,height:"200px"}}),t._v(" "),r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("h3",{staticClass:"headline mb-0"},[t._v(t._s(e.title))]),t._v(" "),r("div",[t._v(t._s(e.description))])])]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{flat:"",color:"orange accent-2",to:"/ad/"+e.id}},[t._v("Open")]),t._v(" "),r("app-buy-modal",{attrs:{ad:e}})],1)],1)],1)}))],1)],1)},staticRenderFns:[]};var A=r("VU/8")({computed:{ads:function(){return this.$store.getters.ads},promoAds:function(){return this.$store.getters.promoAds},loading:function(){return this.$store.getters.loading}}},L,!1,function(t){r("/F+Z")},null,null).exports,U={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"400px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-btn",{attrs:{slot:"activator",color:"orange"},slot:"activator"},[t._v("Edit")]),t._v(" "),r("v-card",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-title",[r("h1",{staticClass:"text--primary"},[t._v("Edit ad")])])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[r("v-text-field",{attrs:{color:"blue-grey darken-1",name:"title",label:"Title",type:"text"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),t._v(" "),r("v-text-field",{attrs:{color:"blue-grey darken-1",name:"description",label:"Description",type:"text","multi-line":""},model:{value:t.editedDescription,callback:function(e){t.editedDescription=e},expression:"editedDescription"}})],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{flat:""},on:{click:t.onCancel}},[t._v("Cancel\n            ")]),t._v(" "),r("v-btn",{attrs:{color:"orange"},on:{click:t.onSave}},[t._v("Save\n            ")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},I={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"450px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-btn",{attrs:{slot:"activator",flat:"",color:"orange"},slot:"activator"},[t._v("Delete")]),t._v(" "),r("v-card",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-title",[r("h1",{staticClass:"text--primary"},[t._v("Do you want to delete this ad?")])])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[r("h3",[t._v(t._s(t.title))])]),t._v(" "),r("v-card-media",{attrs:{height:"150px",src:t.ad.src}})],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{flat:""},on:{click:t.onCancel}},[t._v("Cancel\n            ")]),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.onDelete}},[t._v("Delete\n            ")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},R={props:["id"],computed:{ad:function(){var t=this.id;return this.$store.getters.adById(t)},isOwner:function(){return null!==this.$store.getters.user&&this.ad.ownerId===this.$store.getters.user.id},loading:function(){return this.$store.getters.loading}},components:{AppEditAdModal:r("VU/8")({props:["ad"],data:function(){return{editedTitle:this.ad.title,editedDescription:this.ad.description,modal:!1}},methods:{onCancel:function(){this.editedTitle=this.ad.title,this.editedDescription=this.ad.description,this.modal=!1},onSave:function(){""!==this.editedTitle&&""!==this.editedDescription&&(this.$store.dispatch("updateAd",{title:this.editedTitle,description:this.editedDescription,id:this.ad.id}),this.modal=!1)}}},U,!1,null,null,null).exports,AppDeleteAdModal:r("VU/8")({props:["ad"],data:function(){return{title:this.ad.title,modal:!1}},methods:{onCancel:function(){this.modal=!1},onDelete:function(){var t=this;this.$store.dispatch("deleteAd",{ad:this.ad}).then(function(){t.$router.push("/list"),t.modal=!1}).catch(function(){})}}},I,!1,null,null,null).exports}},D={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[t.loading?r("v-flex",{staticClass:"text-xs-center home__loader-margin",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{size:70,width:4,indeterminate:"",color:"orange accent-2"}})],1):r("v-flex",{attrs:{xs12:""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v(t._s(t.ad.title))]),t._v(" "),r("v-card",{staticClass:"elevation-12"},[r("v-card-media",{attrs:{height:"350px",src:t.ad.src}}),t._v(" "),r("v-card-text",[r("span",[t._v(t._s(t.ad.description))])]),t._v(" "),t.isOwner?r("v-card-actions",[r("v-spacer"),t._v(" "),r("app-delete-ad-modal",{attrs:{ad:t.ad}}),t._v(" "),r("app-edit-ad-modal",{attrs:{ad:t.ad}})],1):r("v-card-actions",[r("v-spacer"),t._v(" "),r("app-buy-modal",{attrs:{ad:t.ad}})],1)],1)],1)],1)],1)},staticRenderFns:[]},O=r("VU/8")(R,D,!1,null,null,null).exports,M={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[t.loading||0===t.userAds.length?t.loading||0!==t.userAds.length?r("v-layout",{attrs:{row:""}},[r("v-flex",{staticClass:"text-xs-center home__loader-margin",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{size:70,width:4,indeterminate:"",color:"orange accent-2"}})],1)],1):r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v("You have no ads")])])],1):r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v("My ads")]),t._v(" "),t._l(t.userAds,function(e){return r("v-card",{key:e.id,staticClass:"elevation-10 mb-3"},[r("v-card-media",{staticClass:"white--text",attrs:{height:"150px",src:e.src}},[r("v-container",{attrs:{"fill-height":"",fluid:""}},[r("v-layout",{attrs:{"fill-height":""}},[r("v-flex",{attrs:{xs12:"","align-end":"",flexbox:""}},[r("span",{staticClass:"headline"},[t._v(t._s(e.title))])])],1)],1)],1),t._v(" "),r("v-card-title",[r("span",[t._v(t._s(e.description))])]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{small:"",color:"orange",to:"/ad/"+e.id}},[t._v("Open")])],1)],1)})],2)],1)],1)},staticRenderFns:[]},F=r("VU/8")({computed:{userAds:function(){return this.$store.getters.userAds},loading:function(){return this.$store.getters.loading}},created:function(){this.$store.dispatch("fetchAds")}},M,!1,null,null,null).exports,P={data:function(){return{title:"",description:"",valid:!1,promo:!1,src:"",image:null}},computed:{loading:function(){return this.$store.getters.loading}},methods:{createAd:function(){var t=this;if(this.$refs.form.validate()&&this.image){var e={title:this.title,description:this.description,promo:this.promo,image:this.image};this.$store.dispatch("createAd",e).then(function(){t.$router.push("/list")}).catch(function(){})}},triggerUpload:function(){this.$refs.imageUpload.click()},onFileChange:function(t){var e=this,r=t.target.files[0],a=new FileReader;a.onload=function(t){e.src=a.result},a.readAsDataURL(r),this.image=r}}},S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v("Create new ad")]),t._v(" "),r("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{required:"",rules:[function(t){return!!t||"Title is required"}],color:"blue-grey darken-1",name:"title",label:"Title",type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),r("v-text-field",{attrs:{"multi-line":"",required:"",color:"blue-grey darken-1",rules:[function(t){return!!t||"Description is required"}],name:"description",label:"Description",type:"description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),t._v(" "),r("v-layout",{staticClass:"mt-3",attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[t.src?r("img",{attrs:{src:t.src,height:"100"}}):t._e()])],1),t._v(" "),r("v-layout",{staticClass:"mt-3",attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey darken-2"},on:{click:t.triggerUpload}},[t._v("\n                  Upload\n                  "),r("v-icon",{attrs:{right:"",dark:""}},[t._v("add_a_photo")])],1),t._v(" "),r("input",{ref:"imageUpload",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-switch",{staticClass:"mt-3",attrs:{color:"blue-grey darken-2",label:"Add to promo"},model:{value:t.promo,callback:function(e){t.promo=e},expression:"promo"}}),t._v(" "),r("v-btn",{staticClass:"white--text mt-2",attrs:{loading:t.loading,disabled:!t.valid||t.loading||!t.image,color:"orange accent-2"},on:{click:t.createAd}},[t._v("\n                        Create ad\n                    ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},q=r("VU/8")(P,S,!1,null,null,null).exports,V={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg4:""}},[r("v-card",{staticClass:"elevation-18"},[r("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-3"}},[r("v-toolbar-title",[t._v("Login")])],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{rules:t.emailRules,color:"blue-grey darken-1","prepend-icon":"person",name:"email",label:"Email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-text-field",{attrs:{counter:6,color:"blue-grey darken-1",rules:t.passRules,"prepend-icon":"lock",name:"password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{loading:t.loading,disabled:!t.valid||t.loading,color:"orange accent-2"},on:{click:t.onSubmit}},[t._v("Login")])],1)],1)],1)],1)],1)},staticRenderFns:[]},N=r("VU/8")({data:function(){return{email:"",password:"",valid:!1,emailRules:[function(t){return!!t||"Email is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],passRules:[function(t){return!!t||"Password is required"},function(t){return!!t&&t.length>=6||"Password must be at least 6 characters"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onSubmit:function(){var t=this;if(this.$refs.form.validate()){var e={email:this.email,password:this.password};this.$store.dispatch("loginUser",e).then(function(){t.$router.push("/")}).catch(function(){})}}},created:function(){this.$route.query.loginError&&this.$store.dispatch("setError","Please log in to access this page")}},V,!1,null,null,null).exports,T={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg4:""}},[r("v-card",{staticClass:"elevation-18"},[r("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-3"}},[r("v-toolbar-title",[t._v("Registration form")])],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{rules:t.emailRules,color:"blue-grey darken-1","prepend-icon":"person",name:"email",label:"Email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-text-field",{attrs:{counter:6,color:"blue-grey darken-1",rules:t.passRules,"prepend-icon":"lock",name:"password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),r("v-text-field",{attrs:{color:"blue-grey darken-1","prepend-icon":"lock",counter:6,rules:t.passConfRules,name:"passConf",label:"Password confirmation",type:"password"},model:{value:t.passConf,callback:function(e){t.passConf=e},expression:"passConf"}})],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{loading:t.loading,disabled:!t.valid||t.loading,color:"orange accent-2"},on:{click:t.onSubmit}},[t._v("Create account")])],1)],1)],1)],1)],1)},staticRenderFns:[]},z=r("VU/8")({data:function(){var t=this;return{email:"",password:"",passConf:"",valid:!1,emailRules:[function(t){return!!t||"Email is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],passRules:[function(t){return!!t||"Password is required"},function(t){return!!t&&t.length>=6||"Password must be at least 6 characters"}],passConfRules:[function(t){return!!t||"Password confirmation is required"},function(e){return e===t.password||"Passwords should match"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onSubmit:function(){var t=this;if(this.$refs.form.validate()){var e={email:this.email,password:this.password};this.$store.dispatch("registerUser",e).then(function(){t.$router.push("/")}).catch(function(){})}}}},T,!1,null,null,null).exports,Y={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[t.loading?r("v-flex",{staticClass:"text-xs-center mt-5",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{size:70,width:4,indeterminate:"",color:"orange accent-2"}})],1):t.loading||0!==t.orders.length?t.loading||0===t.orders.length?t._e():r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v("Orders")]),t._v(" "),r("v-list",{attrs:{"three-line":""}},t._l(t.orders,function(e){return r("v-list-tile",{key:e.id},[r("v-list-tile-action",[r("v-checkbox",{attrs:{color:"orange accent-2","input-value":e.done},on:{change:function(r){t.changeStatus(e)}}})],1),t._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[t._v(t._s(e.name)+" ( "+t._s(e.phone)+" )")]),t._v(" "),r("v-list-tile-sub-title",[t._v(t._s(e.message))])],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"orange accent-2",to:"/ad/"+e.adId}},[t._v("\n                  Open\n                ")])],1)}))],1):r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",{staticClass:"text--secondary mb-2"},[t._v("You have no orders")])])],1)],1)},staticRenderFns:[]},j=r("VU/8")({computed:{orders:function(){return this.$store.getters.orders},loading:function(){return this.$store.getters.loading}},methods:{changeStatus:function(t){this.$store.dispatch("markOrderDone",t.id).then(function(){t.done=!0}).catch(function(){})}},created:function(){this.$store.dispatch("fetchOrders")}},Y,!1,null,null,null).exports;a.a.use(o.a);var B=new o.a({routes:[{path:"",name:"home",component:A},{path:"/ad/:id",props:!0,name:"ad",component:O},{path:"/list",name:"adList",component:F,beforeEnter:$},{path:"/new",name:"newAd",component:q,beforeEnter:$},{path:"/login",name:"login",component:N},{path:"/registration",name:"reg",component:z},{path:"/orders",name:"orders",component:j,beforeEnter:$}],mode:"history"}),W=r("3EgV"),Z=r.n(W),G={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"400px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-btn",{attrs:{slot:"activator",color:"orange"},slot:"activator"},[t._v("Buy")]),t._v(" "),r("v-card",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-title",[r("h1",{staticClass:"text--primary"},[t._v("Do you want to buy it?")])])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[r("v-text-field",{attrs:{required:"",color:"blue-grey darken-1",name:"name",label:"Your name",type:"text"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),r("v-text-field",{attrs:{required:"",color:"blue-grey darken-1",name:"phone",label:"Your phone",type:"text"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),r("v-text-field",{attrs:{color:"blue-grey darken-1",name:"message",label:"Message","multi-line":"",type:"text"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{flat:"",disabled:t.localLoading},on:{click:t.onClose}},[t._v("\n              Close\n            ")]),t._v(" "),r("v-btn",{attrs:{disabled:!t.valid||t.localLoading,loading:t.localLoading,color:"orange"},on:{click:t.onBuy}},[t._v("\n              Buy\n            ")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},H=r("VU/8")({props:["ad"],data:function(){return{name:"",phone:"",message:"",modal:!1,localLoading:!1}},computed:{valid:function(){return""!==this.name&&""!==this.phone}},methods:{onClose:function(){this.name="",this.phone="",this.message="",this.modal=!1},onBuy:function(){var t=this;this.valid&&(this.localLoading=!0,this.$store.dispatch("createOrder",{name:this.name,phone:this.phone,message:this.message,adId:this.ad.id,ownerId:this.ad.ownerId}).finally(function(){t.name="",t.phone="",t.message="",t.modal=!1,t.localLoading=!1}))}}},G,!1,null,null,null).exports;r("7zck");a.a.use(Z.a),a.a.component("app-buy-modal",H),a.a.config.productionTip=!1,new a.a({el:"#app",router:B,store:C,components:{App:n},template:"<App/>",created:function(){var t=this;_.initializeApp({apiKey:"AIzaSyCXAt7sYjrCD-okksPVEOuDcEsCIjbhk20",authDomain:"dechev-ad-app.firebaseapp.com",databaseURL:"https://dechev-ad-app.firebaseio.com",projectId:"dechev-ad-app",storageBucket:"dechev-ad-app.appspot.com",messagingSenderId:"506658506283"}),_.auth().onAuthStateChanged(function(e){e&&t.$store.dispatch("autoLogin",e)}),this.$store.dispatch("fetchAds")}})}},["NHnr"]);
//# sourceMappingURL=app.267d62a251d60fc950f2.js.map